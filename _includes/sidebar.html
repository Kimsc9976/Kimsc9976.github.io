<aside class="sidebar">
    <h2>목차</h2>
    <ul>
        {% assign modules = site.data.sidebar_structure %}
        {% if modules %}
        {% for modules in modules %}
        <li>
            {% assign module_name =  modules[0] %}
            {% assign sub_modules =  modules[1] %}
            <span onclick="toggleSubmodules('submodules-{{ forloop.index }}')" style="cursor: pointer;">
                {{ module_name }} [Toggle]
            </span>
            <ul id="submodules-{{ forloop.index }}" style="display: none;">
                {% assign last_index = sub_modules.size | minus: 1 %}
                {% for submodule in sub_modules %}
                    <li>
                        {% if forloop.index0 == last_index %}
                            <span style="margin-right: 10px;">└──</span> <a href="#">{{ submodule }}</a>
                        {% else %}
                            <span style="margin-right: 10px;">├──</span> <a href="#">{{ submodule }}</a>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </li>
        {% endfor %}
        {% else %}
        <li>No modules found or data not loaded.</li>
        {% endif %}
    </ul>
</aside>

<script>
    function toggleSubmodules(id) {
        var element = document.getElementById(id);
        var icon = document.getElementById('toggle-icon-' + id.split('-')[1]);

        if (element.style.display === 'none') {
            element.style.display = 'block';
            icon.innerHTML = '&#9660;'; // 아래쪽 화살표
        } else {
            element.style.display = 'none';
            icon.innerHTML = '&#9658;'; // 오른쪽 화살표
        }
    }
</script>       